/*
    snapped
    version 0.1.0
    a minimal native fullpage scroller
    written by thomas weber
    copyright 2022 binaries included
    MIT License
*/
class Snapped{paginationClickDelegate(a){if(a.target.classList.contains("snap-pagination-dot")&&a.target.dataset.view){if(!document.querySelectorAll(`.snap-view[data-view="${a.target.dataset.view}"]`).length)return!1;document.querySelector(`.snap-view[data-view="${a.target.dataset.view}"]`).scrollIntoView({behavior:"smooth",block:"start"})}}setPaginationIndex(a){if(this.activeViewId===a)return!1;this.activeViewId&&document.querySelector(`.snap-pagination-dot[data-view="${this.activeViewId}"]`).classList.remove("active"),document.querySelector(`.snap-pagination-dot[data-view="${a}"]`).classList.add("active"),this.activeViewId=a}createPagination(){let b=document.querySelectorAll(".snap-view"),e=b.length;if(e<1)return!1;let a=document.createElement("div");a.classList.add("snap-pagination"),document.querySelector(".snap-container").classList.contains("horizontal")&&a.classList.add("horizontal");for(let c=0;c<e;c++){let d=document.createElement("div");d.classList.add("snap-pagination-dot"),d.dataset.view=b[c].dataset.view,a.append(d)}a.addEventListener("click",a=>this.paginationClickDelegate(a)),document.querySelector("body").append(a);let f=new IntersectionObserver(a=>{a.forEach(a=>{a.isIntersecting?(a.target.dataset.visible="yes",this.setPaginationIndex(a.target.dataset.view)):a.target.dataset.visible="no"})},{threshold:.7});b.forEach(a=>{f.observe(a)}),b=null}initAnimationObserver(){let a=document.querySelectorAll("*[data-animation]");if(!a.length)return!1;let b=new IntersectionObserver(a=>{a.forEach(a=>{a.isIntersecting?a.target.classList.add(a.target.dataset.animation):a.target.classList.remove(a.target.dataset.animation)})},{threshold:.5});a.forEach(a=>{b.observe(a)}),a=null}createUI(){this.showPagination&&this.createPagination(),this.triggerAnimations&&this.initAnimationObserver()}constructor(a=null){this.activeViewId=null,this.showPagination=a&&a.showPagination,this.triggerAnimations=a&&a.triggerAnimations,this.createUI()}}export{Snapped}